window.ASTC={version:"1.2.04",RGBToHex:function(o){var t=-1<(o=void 0===o?"rgb(255,255,255)":o).indexOf(",")?",":" ";let n=(+(o=o.substr(4).split(")")[0].split(t))[0]).toString(16),r=(+o[1]).toString(16),e=(+o[2]).toString(16);return 1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),1==e.length&&(e="0"+e),"#"+n+r+e},str_split:function(o,t){return o.match(new RegExp("[^]{"+parseInt(t||"1",10)+"}","g"))},getContrast:function(t){3==(t=t.replace("#","")).length&&(n=ASTC.str_split(t,1),t="",n.each(function(o){t+=n[o]+n[o]}));var n,o=parseInt(t,16),o=[255&o>>16,255&o>>8,255&o];return contrast=(Math.round(299*o[0])+Math.round(587*o[1])+Math.round(114*o[2]))/1e3},checkColor:function(o){return!(125<=ASTC.getContrast(o))},checkColorBtn:function(o){return!(180<=ASTC.getContrast(o))},getContrastColor:function(o){return ASTC.checkColor(o)?"#000000":"#ffffff"},makeDarkOrLight:function(o){var o=$("#b_"+o),t=o.css("background-color");"rgba(0, 0, 0, 0)"!=t&&((t=ASTC.RGBToHex(t))&&ASTC.checkColor(t)?o.addClass("dark"):o.removeClass("dark")),$(".bg_color").length&&o.find(".bg_color").each(function(){var o=$(this).css("display"),t=$(this).css("background-color");"rgba(0, 0, 0, 0)"!=t&&((t=ASTC.RGBToHex(t))&&ASTC.checkColor(t)&&"none"!=o?$(this).parent().addClass("dark"):t&&!ASTC.checkColor(t)&&"block"==o&&$(this).parent().addClass("light"))}),o.find(".menu1, .extra_info_block, .text_block, .col_3, .col_4, .txt_and_btn, .table .line, .icon_layer, .tile, .content-tile, .content-text, .spoiler").each(function(){var o=$(this),t=o.css("background-color");"rgba(0, 0, 0, 0)"!=(t="rgba(0, 0, 0, 0)"==(t="rgba(0, 0, 0, 0)"==t&&0<o.closest(".text_block").length?o.closest(".text_block").css("background-color"):t)?o.closest(".section").css("background-color"):t)&&((t=ASTC.RGBToHex(t))&&ASTC.checkColor(t)?o.addClass("dark"):o.removeClass("dark"))}),o.find(".bg_right, .form_bg_color, .col_bg, .menu1 ul").each(function(){var o=$(this),t=o.css("background-color");"rgba(0, 0, 0, 0)"!=(t="rgba(0, 0, 0, 0)"==(t="rgba(0, 0, 0, 0)"==t&&0<o.closest(".text_block").length?o.closest(".text_block").css("background-color"):t)?o.closest(".section").css("background-color"):t)&&((t=ASTC.RGBToHex(t))&&ASTC.checkColor(t)?o.parent().addClass("dark"):o.parent().removeClass("dark"))})},makeDarkOrLightBTNs:function(o){$("#b_"+o).find(".surround, .cookie_btn, .section1011 .next").each(function(){var o=$(this),t=o.css("background-color");"rgba(0, 0, 0, 0)"!=t&&(t=ASTC.RGBToHex(t),o.hasClass("surround")?t&&ASTC.checkColorBtn(t)&&o.addClass("dark"):t&&ASTC.checkColor(t)&&o.addClass("dark"))})},checkSectionsColor:function(){$(".section").each(function(){var o=$(this).data("id");ASTC.getImageContrastColor(o),ASTC.makeDarkOrLight(o),ASTC.makeDarkOrLightBTNs(o)})},checkBackgroundImageInUse:function(o){o=$("#b_"+o).css("background-image");return!(!o||"undefined"==o||null==o||"none"==o||-1<o.indexOf("null.png")||-1<o.indexOf("linear-gradient"))},getImageContrastColor:function(o){if(!ASTC.checkBackgroundImageInUse(o))return!1;var a=$("#b_"+o),o=a.css("background-image").match(/url\(["']?([^"']*)["']?\)/)[1],c=new Image;c.src=o,c.style.display="none",document.body.appendChild(c),c.onload=function(){var o=document.createElement("canvas"),t=o.getContext("2d");o.width=c.width,o.height=c.height,t.drawImage(c,0,0),c.remove();var t=t.getImageData(0,0,o.width,o.height).data,o=4*(100*o.width+960),n=t[o],n="#"+((1<<24)+(n<<16)+(t[1+o]<<8)+t[2+o]).toString(16).slice(1);if(!ASTC.isValidHexColor(n)||"#000000"==n)return!1;var r,t=!1,o=!1,e=(0<a.find(".back_dark").length&&(r=a.find(".back_dark"),"rgba(0, 0, 0, 0)"!==(r=ASTC.getAverageBackgroundColor(r)))&&(r=ASTC.RGBToHex(r))&&ASTC.checkColor(r)&&(t=!0),0<a.find(".back_gradient").length&&(r=a.find(".back_gradient"),"rgba(0, 0, 0, 0)"!==(r=ASTC.getAverageBackgroundColor(r)))&&(r=ASTC.RGBToHex(r))&&ASTC.checkColor(r)&&(o=!0),ASTC.checkColor(n)||t||o);e?a.addClass("dark"):a.removeClass("dark"),a.find(".bg_right, .form_bg_color, .col_bg").each(function(){var o=parseFloat($(this).css("opacity"))||1;e&&o<.5&&$(this).parent().addClass("dark")})}},checkSubstring:function(o,t){return!!o.includes(t)},isValidHexColor:function(o){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(o)},getAverageBackgroundColor:function(o){for(var t=[],n=[],r=0;r<t.length;r++){var e=t[r].replace(/rgba?\(/,"").replace(/\)/,"").split(",");n[0]=(n[0]||0)+parseInt(e[0],10),n[1]=(n[1]||0)+parseInt(e[1],10),n[2]=(n[2]||0)+parseInt(e[2],10)}return n[0]=Math.round(n[0]/t.length),n[1]=Math.round(n[1]/t.length),n[2]=Math.round(n[2]/t.length),"rgb("+n.join(",")+")"}},$(function(){console.log("ASTC DEV: "+ASTC.version),ASTC.checkSectionsColor(),$("body").on("change","input.choose_bg_color",function(){ASTC.checkSectionsColor()}),$(".menu1").each(function(){"rgb(51, 51, 51)"==$(this).css("color")&&$(this).closest(".section").hasClass("dark")&&$(this).css("color","")});var r=$(".clip_influx:not(.clip_none)").length;$(".clip_influx:not(.clip_none)").each(function(o){var t=$(this),o=15+r-o,n=Math.round(-1*t.outerHeight()*.06,1)+"px";t.attr("style",t.attr("style")+"; --cliped-margin-bottom: "+n),t.css("z-index",o)})});